<div class="container ml-1 mr-1">
  <div class="row">

    <section class="col-2">
      <ng-container *ngIf="chargingPointLocations && chargingPointTypes">

        <h6 class="text-success ml-1 mt-4 mb-3">Sort</h6>
        <select class="form-control form-control-sm mb-3" (change)="onSortSelected($event.target.value)">
          <option *ngFor="let sort of sortOptions"
                  [selected]="storeParams.sort === sort.value"
                  [value]="sort.value">
            {{sort.name}}
          </option>
        </select>

        <h6 class="text-success ml-1">Locations</h6>
        <ul class="list-group my-3">
          <li class="list-group-item list-group-item-action" *ngFor="let location of chargingPointLocations"
              [class.active]="location.id === this.storeParams.chargingPointLocationId" [value]="location.id"
              (click)="onLocationSelected(location.id)">
            {{location.city}}
          </li>
        </ul>

        <h6 class="text-success ml-1">Types</h6>
        <ul class="list-group my-3">
          <li class="list-group-item list-group-item-action" *ngFor="let type of chargingPointTypes" [class.active]="type.id === this.storeParams.chargingPointTypeId"
              [value]="type.id" (click)="onTypeSelected(type.id)">
            {{type.name}}
          </li>
        </ul>
      </ng-container>
    </section>

    <section class="col-10">

      <div class="d-flex justify-content-between align-items-center pb-2">

        <app-paging-header [totalCount]="totalCount"
                           [pageSize]="this.storeParams.pageSize"
                           [pageNumber]="this.storeParams.pageNumber">
        </app-paging-header>

        <div class="form-inline" *ngIf="chargingPoints">
          <input (keyup.enter)="onSearch()" class="form-control mr-2" #search style="width: 300px" placeholder="Search" type="text">
          <button (click)="onSearch()" class="btn btn-outline-primary my-2">Search</button>
          <button (click)="onReset()" class="btn btn-outline-success ml-2 my-2">Reset</button>
        </div>

      </div>

      <div class="row">
        <div class="card col-4 mb-3 border-0" *ngFor="let item of chargingPoints">
          <div class="card-header">{{item.name}}</div>
          <div class="card-body">
            <h4 class="card-title">{{item.chargingpointlocation}}</h4>
            <h6 class="card-title">Price: Â£{{item.price}}</h6>
            <p class="card-text">Location: {{item.chargingPointLocation}}</p>
            <p class="card-text">Type: {{item.chargingPointType}}</p>
            <p class="card-text">Available: {{item.qtyAvailable}}</p>
          </div>
          <div *ngIf="(currentUser$ | async)">
            <button class="badge badge-pill badge-success" *ngIf="item.qtyAvailable > 0" (click)="createBooking(item.id)">Book</button>
            <button class="badge badge-pill" *ngIf="item.qtyAvailable == 0" disabled>Book</button>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center" *ngIf="totalCount > 0">
        <app-pager [pageSize]="storeParams.pageSize"
                   [pageNumber]="storeParams.pageNumber"
                   [totalCount]="totalCount"
                   (pageChanged)="onPageChanged($event)">
        </app-pager>

      </div>

    </section>

  </div>
</div>
